(this["webpackJsonpphoto-gallery"]=this["webpackJsonpphoto-gallery"]||[]).push([[0],{153:function(e,t){},154:function(e,t){},161:function(e,t){},163:function(e,t){},203:function(e,t,a){},204:function(e,t,a){"use strict";a.r(t);var r=a(2),n=a.n(r),c=a(48),s=a.n(c),i=(a(94),a(209)),l=a(17),u=a(110);a(121),a(205);var j=u.a.initializeApp({apiKey:"AIzaSyCiXEg2G5O0yQ4UrqlfEwC6D_n0_PzkdTc",authDomain:"wds-react-auth-dev.firebaseapp.com",projectId:"wds-react-auth-dev",storageBucket:"wds-react-auth-dev.appspot.com",messagingSenderId:"672075170526",appId:"1:672075170526:web:137f6f15f056420730384f",databaseURL:"https://wds-react-auth-dev-default-rtdb.asia-southeast1.firebasedatabase.app"}),o=j.auth(),b={feedbacks:function(e){return{getAll:function(){return e},create:function(t){return e.push(t)},update:function(t,a){return e.child(t).update(a)},remove:function(t){return e.child(t).remove()},removeAll:function(){return e.remove()}}}(j.database().ref("/feedbacks"))},d=a(6),p=n.a.createContext();function h(){return Object(r.useContext)(p)}function O(e){var t=e.children,a=Object(r.useState)(),n=Object(l.a)(a,2),c=n[0],s=n[1],i=Object(r.useState)(!0),u=Object(l.a)(i,2),j=u[0],b=u[1];Object(r.useEffect)((function(){return o.onAuthStateChanged((function(e){s(e),b(!1)}))}),[]);var h={currentUser:c,signup:function(e,t,a){return o.createUserWithEmailAndPassword(e,t).then((function(e){return e.user.updateProfile({displayName:a})}))},login:function(e,t){return o.signInWithEmailAndPassword(e,t)},logout:function(){return o.signOut()},resetPassword:function(e){return o.sendPasswordResetEmail(e)},updateEmail:function(e){return c.updateEmail(e)},updatePassword:function(e){return c.updatePassword(e)}};return Object(d.jsx)(p.Provider,{value:h,children:!j&&t})}var x=a(57),f=a(111),m=n.a.createContext();function g(e){var t=e.children,a=Object(r.useState)([]),n=Object(l.a)(a,2),c=n[0],s=n[1],i=Object(f.a)(b.feedbacks.getAll()),u=Object(l.a)(i,1)[0];Object(r.useEffect)((function(){var e=[];u.map((function(t){return e.push(Object(x.a)({key:t.key},t.val()))})),s([].concat(e))}),[u]);var j={feedbacks:c};return Object(d.jsx)(m.Provider,{value:j,children:t})}var v=a(0),w=a.n(v),y=a(3),k=a(214),N=a(207),S=a(211),C=a(208),L=a(34),P=(a(124),a(20)),U=a(21);function E(){var e=Object(r.useRef)(),t=Object(r.useRef)(),a=Object(r.useRef)(),n=Object(r.useRef)(),c=h(),s=c.signup,i=(c.currentUser,Object(r.useState)("")),u=Object(l.a)(i,2),j=u[0],o=u[1],b=Object(r.useState)(!1),p=Object(l.a)(b,2),O=p[0],x=p[1],f=Object(P.g)();function m(){return(m=Object(y.a)(w.a.mark((function r(c){var i,u,j;return w.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(c.preventDefault(),a.current.value===n.current.value){r.next=3;break}return r.abrupt("return",o("Password do not match"));case 3:if(!(e.current.value<3)){r.next=5;break}return r.abrupt("return",o("Name must be set, and greater than 3 character"));case 5:return x(!0),r.next=8,Object(L.a)(s(t.current.value,a.current.value,e.current.value));case 8:if(i=r.sent,u=Object(l.a)(i,2),u[0],j=u[1],x(!1),!j){r.next=15;break}return r.abrupt("return",o(j.message));case 15:o(""),f.push("/gallery");case 17:case"end":return r.stop()}}),r)})))).apply(this,arguments)}return Object(d.jsxs)("div",{children:[Object(d.jsx)(k.a,{children:Object(d.jsxs)(k.a.Body,{children:[Object(d.jsx)("h2",{className:"text-center mb-4",children:"Sign up"}),j&&Object(d.jsx)(N.a,{variant:"danger",children:j}),Object(d.jsxs)(S.a,{onSubmit:function(e){return m.apply(this,arguments)},children:[Object(d.jsxs)(S.a.Group,{id:"name",children:[Object(d.jsx)(S.a.Label,{children:"Name"}),Object(d.jsx)(S.a.Control,{type:"name",ref:e,required:!0})]}),Object(d.jsxs)(S.a.Group,{id:"email",children:[Object(d.jsx)(S.a.Label,{children:"Email"}),Object(d.jsx)(S.a.Control,{type:"email",ref:t,required:!0})]}),Object(d.jsxs)(S.a.Group,{id:"password",children:[Object(d.jsx)(S.a.Label,{children:"Password"}),Object(d.jsx)(S.a.Control,{type:"password",ref:a,required:!0})]}),Object(d.jsxs)(S.a.Group,{id:"password-confirm",children:[Object(d.jsx)(S.a.Label,{children:"Password Confirmation"}),Object(d.jsx)(S.a.Control,{type:"password",ref:n,required:!0})]}),Object(d.jsx)(C.a,{disabled:O,className:"w-100",type:"submit",children:"Sign up"})]})]})}),Object(d.jsxs)("div",{className:"w-100 text-center mt-2",children:["Already have account? ",Object(d.jsx)(U.b,{to:"/login",children:"Log in"})]})]})}function G(){var e=Object(r.useRef)(),t=Object(r.useRef)(),a=h(),n=a.login,c=(a.currentUser,Object(r.useState)("")),s=Object(l.a)(c,2),i=s[0],u=s[1],j=Object(r.useState)(!1),o=Object(l.a)(j,2),b=o[0],p=o[1],O=Object(P.g)();function x(){return(x=Object(y.a)(w.a.mark((function a(r){var c,s,i;return w.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r.preventDefault(),p(!0),a.next=4,Object(L.a)(n(e.current.value,t.current.value));case 4:if(c=a.sent,s=Object(l.a)(c,2),s[0],i=s[1],p(!1),!i){a.next=11;break}return a.abrupt("return",u(i.message));case 11:u(""),O.push("/gallery");case 13:case"end":return a.stop()}}),a)})))).apply(this,arguments)}return Object(d.jsxs)("div",{children:[Object(d.jsx)(k.a,{children:Object(d.jsxs)(k.a.Body,{children:[Object(d.jsx)("h2",{className:"text-center mb-4",children:"Log in"}),i&&Object(d.jsx)(N.a,{variant:"danger",children:i}),Object(d.jsxs)(S.a,{onSubmit:function(e){return x.apply(this,arguments)},children:[Object(d.jsxs)(S.a.Group,{id:"email",children:[Object(d.jsx)(S.a.Label,{children:"Email"}),Object(d.jsx)(S.a.Control,{type:"email",ref:e,required:!0})]}),Object(d.jsxs)(S.a.Group,{id:"password",children:[Object(d.jsx)(S.a.Label,{children:"Password"}),Object(d.jsx)(S.a.Control,{type:"password",ref:t,required:!0})]}),Object(d.jsx)(C.a,{disabled:b,className:"w-100",type:"submit",children:"Login"}),Object(d.jsxs)("div",{className:"w-100 text-center mt-2",children:["Forget password? ",Object(d.jsx)(U.b,{to:"/reset-password",children:"reset password"})]})]})]})}),Object(d.jsxs)("div",{className:"w-100 text-center mt-2",children:["Need an account? ",Object(d.jsx)(U.b,{to:"/signup",children:"signup"})]})]})}var R=a(114),A=["component"];function q(e){var t=e.component,a=Object(R.a)(e,A),r=h().currentUser;return Object(d.jsx)(P.b,Object(x.a)(Object(x.a)({},a),{},{render:function(e){return r?Object(d.jsx)(t,Object(x.a)({},e)):Object(d.jsx)(P.a,{to:"/login"})}}))}function I(){var e=Object(r.useRef)(),t=(Object(r.useRef)(),h().resetPassword),a=Object(r.useState)(""),n=Object(l.a)(a,2),c=n[0],s=n[1],i=Object(r.useState)(!1),u=Object(l.a)(i,2),j=u[0],o=u[1],b=Object(r.useState)(""),p=Object(l.a)(b,2),O=p[0],x=p[1];function f(){return(f=Object(y.a)(w.a.mark((function a(r){var n,c,i;return w.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r.preventDefault(),o(!0),x(""),a.next=5,Object(L.a)(t(e.current.value));case 5:if(n=a.sent,c=Object(l.a)(n,2),c[0],i=c[1],o(!1),!i){a.next=12;break}return a.abrupt("return",s(i.message));case 12:s(""),x("Please check inbox for further instruction");case 14:case"end":return a.stop()}}),a)})))).apply(this,arguments)}return Object(d.jsxs)("div",{children:[Object(d.jsx)(k.a,{children:Object(d.jsxs)(k.a.Body,{children:[Object(d.jsx)("h2",{className:"text-center mb-4",children:"Reset Password"}),c&&Object(d.jsx)(N.a,{variant:"danger",children:c}),O&&Object(d.jsx)(N.a,{variant:"success",children:O}),Object(d.jsxs)(S.a,{onSubmit:function(e){return f.apply(this,arguments)},children:[Object(d.jsxs)(S.a.Group,{id:"email",children:[Object(d.jsx)(S.a.Label,{children:"Email"}),Object(d.jsx)(S.a.Control,{type:"email",ref:e,required:!0})]}),Object(d.jsx)(C.a,{disabled:j,className:"w-100 my-3",type:"submit",children:"Reset password"})]})]})}),Object(d.jsxs)("div",{className:"w-100 text-center my-3",children:["Or ",Object(d.jsx)(U.b,{to:"/login",children:"Log in"})]})]})}function B(){var e=Object(r.useRef)(),t=Object(r.useRef)(),a=Object(r.useRef)(),n=h(),c=n.currentUser,s=n.updateEmail,i=n.updatePassword,u=Object(r.useState)(""),j=Object(l.a)(u,2),o=j[0],b=j[1],p=Object(r.useState)(!1),O=Object(l.a)(p,2),x=O[0],f=O[1],m=Object(P.g)();function g(){return(g=Object(y.a)(w.a.mark((function r(n){var u,j,o,d,p,h;return w.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n.preventDefault(),t.current.value===a.current.value){r.next=3;break}return r.abrupt("return",b("Password do not match"));case 3:if(e.current.value===c.email){r.next=14;break}return f(!0),r.next=7,Object(L.a)(s(e.current.value));case 7:if(u=r.sent,j=Object(l.a)(u,2),j[0],o=j[1],f(!1),!o){r.next=14;break}return r.abrupt("return",b(o.message));case 14:if(!t.current.value){r.next=25;break}return f(!0),r.next=18,Object(L.a)(i(t.current.value));case 18:if(d=r.sent,p=Object(l.a)(d,2),p[0],h=p[1],f(!1),!h){r.next=25;break}return r.abrupt("return",b(h.message));case 25:b(""),m.push("/");case 27:case"end":return r.stop()}}),r)})))).apply(this,arguments)}return Object(d.jsxs)("div",{children:[Object(d.jsx)(k.a,{children:Object(d.jsxs)(k.a.Body,{children:[Object(d.jsx)("h2",{className:"text-center mb-4",children:"Update profile"}),o&&Object(d.jsx)(N.a,{variant:"danger",children:o}),Object(d.jsxs)(S.a,{onSubmit:function(e){return g.apply(this,arguments)},children:[Object(d.jsxs)(S.a.Group,{id:"email",children:[Object(d.jsx)(S.a.Label,{children:"Email"}),Object(d.jsx)(S.a.Control,{type:"email",ref:e,defaultValue:c.email})]}),Object(d.jsxs)(S.a.Group,{id:"password",children:[Object(d.jsx)(S.a.Label,{children:"Password"}),Object(d.jsx)(S.a.Control,{type:"password",ref:t,placeholder:"Leave blank to keep the password same"})]}),Object(d.jsxs)(S.a.Group,{id:"password-confirm",children:[Object(d.jsx)(S.a.Label,{children:"Password confirmation"}),Object(d.jsx)(S.a.Control,{type:"password",ref:a,placeholder:"Leave blank to keep the password same"})]}),Object(d.jsx)(C.a,{disabled:x,className:"w-100 my-3",type:"submit",children:"Update"})]})]})}),Object(d.jsx)("div",{className:"w-100 text-center mt-2",children:Object(d.jsx)(U.b,{to:"/",children:"cancel"})})]})}var F=a(212),T=a(213);function _(){var e=h(),t=e.logout,a=e.currentUser,r=Object(P.g)(),n=function(){var e=Object(y.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:r.push("/login");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),c=Object(d.jsxs)(F.a,{children:[Object(d.jsx)(U.b,{to:"/login",className:"nav-link",children:"Login"}),Object(d.jsx)(U.b,{to:"/signup",className:"nav-link",children:"Signup"})]}),s=Object(d.jsx)(F.a,{children:Object(d.jsx)("a",{onClick:n,className:"nav-link",href:"/gallery#top",children:"Logout"})});return Object(d.jsx)(T.a,{collapseOnSelect:!0,expand:"sm",bg:"dark",variant:"dark",children:Object(d.jsxs)(i.a,{children:[Object(d.jsx)(U.b,{to:"/gallery",className:"navbar-brand",children:"PhotoG"}),Object(d.jsx)(T.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(d.jsxs)(T.a.Collapse,{id:"responsive-navbar-nav",children:[Object(d.jsx)(F.a,{className:"me-auto",children:Object(d.jsx)(U.b,{to:"/gallery",className:"nav-link",children:"Gallery"})}),a?s:c]})]})})}var z=[{name:"winter",images:["alberto-restifo-cFplR9ZGnAk-unsplash.jpg","andrew-ridley-8jUpX_L9rsk-unsplash.jpg","andrey-bond-S_O16COE6gU-unsplash.jpg","fabrice-villard-7__6lSyuYeA-unsplash.jpg","gabriel-alenius-USXfF_ONUGo-unsplash.jpg","ian-keefe-OgcJIKRnRC8-unsplash.jpg","john-price-UdgvzNom0Xs-unsplash.jpg","jonathan-knepper-9GMO0Sxyw_Y-unsplash.jpg","roberto-nickson-5PQn41LFsQk-unsplash.jpg"]},{name:"volcano",images:["alain-bonnardeaux-tLxGw_ITs7k-unsplash.jpg","hamzah-hanafi-RJvJI1gTE7o-unsplash.jpg","marc-szeglat-I1MGVZ42wnU-unsplash.jpg","tanya-grypachevskaya-80x3QULJDN4-unsplash.jpg","toby-elliott-Nqdx6-LW4VE-unsplash.jpg","toby-elliott-TbEqd-GNC5w-unsplash.jpg","usgs-WQ5HOvrDZ6Y-unsplash.jpg","vadim-sadovski-AH7oKSGbvYE-unsplash.jpg","yosh-ginsu-qexZLgMcbPc-unsplash.jpg","yulia-gadalina-oa8vRa1JBlw-unsplash.jpg"]}];function D(e,t,a){return"images/nature-images-unplash/"+t+e+a}var J=function(){var e={category:[],images:[]};return z.forEach((function(t){e.category.push({name:t.name}),t.images.forEach((function(a,r){e.images.push({preview:D("/preview/",t.name,a),large:D("/large/",t.name,a),category:t.name})}))})),e}();function H(e){var t=e.url,a=e.handleShow;return Object(d.jsx)("div",{className:"card m-2 rounded",style:{width:"14rem",height:"12rem"},children:Object(d.jsx)("img",{className:"card-img-top gallery-image",src:t.preview,alt:"Card cap",onClick:function(){return a(t)}})})}function Q(e){var t=e.images,a=e.handleShow;return Object(d.jsx)("div",{className:"d-flex flex-wrap justify-content-center",children:t.map((function(e){return Object(d.jsx)(H,{url:e,handleShow:a},e.preview)}))})}function W(e){var t=e.list,a=e.handleFilter;return Object(d.jsxs)("div",{className:" my-2",children:[Object(d.jsx)("button",{onClick:function(){return a("all")},type:"button",className:"btn btn-light text-capitalize mx-2",children:"all"}),t.map((function(e){return Object(d.jsx)("button",{onClick:function(){return a(e.name)},type:"button",className:"btn btn-light text-capitalize  mx-2",children:e.name},e.name)}))]})}a(203);var X=a(210);function Y(e){var t=e.currentUser,a=e.imageUrl,n=Object(r.useRef)(),c=function(){var e=Object(y.a)(w.a.mark((function e(){var r,c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.current.value,c={name:t.displayName,feedback:r,uid:t.uid,image:a},e.next=4,Object(L.a)(b.feedbacks.create(c));case 4:n.current.value="";case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(d.jsxs)(S.a,{children:[Object(d.jsxs)(S.a.Group,{className:"mb-3",controlId:"exampleForm.ControlTextarea1",children:[Object(d.jsx)(S.a.Label,{children:"Please write your feedback"}),Object(d.jsx)(S.a.Control,{as:"textarea",ref:n,rows:3})]}),Object(d.jsx)(C.a,{variant:"primary",onClick:c,children:"Submit"})]})}function Z(e){var t=e.feedback;return Object(d.jsx)(k.a,{style:{width:"18rem"},className:"w-100 m-2",children:Object(d.jsxs)(k.a.Body,{children:[Object(d.jsx)(k.a.Title,{children:t.name}),Object(d.jsx)(k.a.Text,{children:t.feedback})]})})}function K(e){e.handleShow;var t=e.handleClose,a=e.show,n=e.currentUser,c=Object(r.useContext)(m).feedbacks.filter((function(e){return e.image===a.large}));return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)(X.a,{show:Boolean(a),onHide:t,children:[Object(d.jsx)(X.a.Header,{children:Object(d.jsx)(X.a.Title,{children:a.category})}),Object(d.jsxs)(X.a.Body,{children:[Object(d.jsx)("img",{className:"w-100",src:a.large,alt:"Card cap"}),!n&&Object(d.jsxs)("p",{children:["Please ",Object(d.jsx)(U.b,{to:"/login",children:"login"})," or"," ",Object(d.jsx)(U.b,{to:"/signup",children:"signup"})," to leave your feedback"]}),n&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("p",{children:["Hello ",n.displayName,", you can leave your feedback"]}),Object(d.jsx)(Y,{currentUser:n,imageUrl:a.large})]}),Object(d.jsx)("div",{children:c&&c.map((function(e){return Object(d.jsx)(Z,{feedback:e},e.key)}))})]}),Object(d.jsx)(X.a.Footer,{children:Object(d.jsx)(C.a,{variant:"secondary",onClick:t,children:"Close"})})]})})}function M(){var e=Object(r.useState)(J.images),t=Object(l.a)(e,2),a=t[0],n=t[1],c=Object(r.useState)(J.category),s=Object(l.a)(c,2),i=s[0],u=(s[1],Object(r.useState)(!1)),j=Object(l.a)(u,2),o=j[0],b=j[1],p=Object(r.useState)(!1),O=Object(l.a)(p,2),x=(O[0],O[1],h()),f=(x.logout,x.currentUser),m=function(e){b(e)};return Object(d.jsxs)("div",{children:[Object(d.jsx)(W,{list:i,handleFilter:function(e){if("all"===e)return n(J.images);n(J.images.filter((function(t){return t.category===e})))}}),Object(d.jsx)(Q,{images:a,handleShow:m}),Object(d.jsx)(K,{handleClose:function(){return b(!1)},handleShow:m,currentUser:f,show:o})]})}var V=function(){return Object(d.jsx)(O,{children:Object(d.jsx)(g,{children:Object(d.jsxs)(U.a,{children:[Object(d.jsx)(_,{}),Object(d.jsx)(i.a,{className:"d-flex align-items-start justify-content-center",style:{minHeight:"100vh"},children:Object(d.jsx)("div",{className:"w-100",style:{maxWidth:"1080px"},children:Object(d.jsxs)(P.d,{children:[Object(d.jsx)(q,{exact:!0,path:"/",component:M}),Object(d.jsx)(q,{path:"/update-profile",component:B}),Object(d.jsx)(P.b,{path:"/signup",component:E}),Object(d.jsx)(P.b,{path:"/login",component:G}),Object(d.jsx)(P.b,{path:"/reset-password",component:I}),Object(d.jsx)(P.b,{path:"/gallery",component:M})]})})})]})})})};s.a.render(Object(d.jsx)(V,{}),document.getElementById("root"))}},[[204,1,2]]]);
//# sourceMappingURL=main.24159332.chunk.js.map